\nimport \'package:flutter/material.dart\';\nimport \'package:ugo_driver/flutter_flow/flutter_flow_theme.dart\';\nimport \'package:haptic_feedback/haptic_feedback.dart\'; // For haptic feedback\n\nclass OrderCompleteWidget extends StatefulWidget {\n  final String customerName;\n  final double estimatedEarning;\n\n  const OrderCompleteWidget({\n    Key? key,\n    required this.customerName,\n    required this.estimatedEarning,\n  }) : super(key: key);\n\n  @override\n  State<OrderCompleteWidget> createState() => _OrderCompleteWidgetState();\n}\n\nclass _OrderCompleteWidgetState extends State<OrderCompleteWidget> {\n  int _currentRating = 0;\n  String _ratingText = \"\";\n  final List<String> _feedbackTags = [\n    \"üòä Polite\",\n    \"‚è∞ Timely\",\n    \"ü§ù Friendly\",\n    \"Other\"\n  ];\n  final List<String> _selectedFeedbackTags = [];\n\n  void _updateRating(int rating) {\n    setState(() {\n      _currentRating = rating;\n      HapticFeedback.lightImpact(); // Haptic feedback on rating\n      switch (rating) {\n        case 1:\n          _ratingText = \"BAD üò†\";\n          break;\n        case 2:\n          _ratingText = \"OKAY üòê\";\n          break;\n        case 3:\n          _ratingText = \"GOOD üôÇ\";\n          break;\n        case 4:\n          _ratingText = \"VERY GOOD üòç\";\n          break;\n        case 5:\n          _ratingText = \"EXCELLENT ü§©\";\n          break;\n        default:\n          _ratingText = \"\";\n      }\n    });\n  }\n\n  void _toggleFeedbackTag(String tag) {\n    setState(() {\n      if (_selectedFeedbackTags.contains(tag)) {\n        _selectedFeedbackTags.remove(tag);\n      } else {\n        _selectedFeedbackTags.add(tag);\n      }\n      HapticFeedback.lightImpact(); // Haptic feedback on tag select\n    });\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      backgroundColor: FlutterFlowTheme.of(context).primaryBackground,\n      appBar: AppBar(\n        backgroundColor: FlutterFlowTheme.of(context).primaryBackground,\n        automaticallyImplyLeading: false,\n        title: Text(\n          \'Order Complete\',\n          style: FlutterFlowTheme.of(context).headlineMedium.override(\n                fontFamily: \'Outfit\',\n                color: FlutterFlowTheme.of(context).primaryText,\n                fontSize: 22,\n              ),\n        ),\n        actions: [\n          Padding(\n            padding: const EdgeInsetsDirectional.fromSTEB(0, 0, 12, 0),\n            child: IconButton(\n              icon: Icon(\n                Icons.help_outline_rounded,\n                color: FlutterFlowTheme.of(context).secondaryText,\n                size: 24,\n              ),\n              onPressed: () {\n                // Handle help button press\n                print(\'Help button pressed on Order Complete\');\n              },\n            ),\n          ),\n        ],\n        centerTitle: false,\n        elevation: 0,\n      ),\n      body: SafeArea(\n        child: Column(\n          children: [\n            Expanded(\n              child: SingleChildScrollView(\n                child: Padding(\n                  padding: const EdgeInsets.all(16.0),\n                  child: Column(\n                    crossAxisAlignment: CrossAxisAlignment.start,\n                    children: [\n                      // Estimated Earning Card\n                      Card(\n                        clipBehavior: Clip.antiAliasWithSaveLayer,\n                        color: FlutterFlowTheme.of(context).secondaryBackground,\n                        elevation: 1,\n                        shape: RoundedRectangleBorder(\n                          borderRadius: BorderRadius.circular(12),\n                        ),\n                        child: Padding(\n                          padding: const EdgeInsets.all(16.0),\n                          child: Row(\n                            mainAxisAlignment: MainAxisAlignment.spaceBetween,\n                            children: [\n                              Column(\n                                crossAxisAlignment: CrossAxisAlignment.start,\n                                children: [\n                                  Text(\n                                    \'Estimated Earning\',\n                                    style: FlutterFlowTheme.of(context)\n                                        .bodyLarge\n                                        .override(\n                                          fontFamily: \'Readex Pro\',\n                                          fontWeight: FontWeight.bold,\n                                        ),\n                                  ),\n                                  Text(\n                                    \'‚Çπ\\${widget.estimatedEarning.toStringAsFixed(0)}\',\n                                    style: FlutterFlowTheme.of(context)\n                                        .displaySmall\n                                        .override(\n                                          fontFamily: \'Outfit\',\n                                          color: FlutterFlowTheme.of(context)\n                                              .success, // Green\n                                          fontSize: 40,\n                                        ),\n                                  ),\n                                ],\n                              ),\n                              Container(\n                                padding: const EdgeInsets.symmetric(\n                                    horizontal: 10, vertical: 5),\n                                decoration: BoxDecoration(\n                                  color: FlutterFlowTheme.of(context).primary,\n                                  borderRadius: BorderRadius.circular(20),\n                                ),\n                                child: Text(\n                                  \'0% Commission, Lifetime Guarantee\',\n                                  style: FlutterFlowTheme.of(context)\n                                      .bodyMedium\n                                      .override(\n                                        fontFamily: \'Readex Pro\',\n                                        color: Colors.white,\n                                        fontSize: 12,\n                                      ),\n                                ),\n                              ),\n                            ],\n                          ),\n                        ),\n                      ),\n                      const SizedBox(height: 24),\n\n                      // Rate your Customer Card\n                      Card(\n                        clipBehavior: Clip.antiAliasWithSaveLayer,\n                        color: FlutterFlowTheme.of(context).secondaryBackground,\n                        elevation: 1,\n                        shape: RoundedRectangleBorder(\n                          borderRadius: BorderRadius.circular(12),\n                        ),\n                        child: Padding(\n                          padding: const EdgeInsets.all(16.0),\n                          child: Column(\n                            crossAxisAlignment: CrossAxisAlignment.start,\n                            children: [\n                              Text(\n                                \'Rate your Customer\',\n                                style: FlutterFlowTheme.of(context)\n                                    .titleLarge\n                                    .override(\n                                      fontFamily: \'Outfit\',\n                                      color: FlutterFlowTheme.of(context)\n                                          .primaryText,\n                                    ),\n                              ),\n                              const SizedBox(height: 16),\n                              Row(\n                                mainAxisAlignment: MainAxisAlignment.center,\n                                children: List.generate(5, (index) {\n                                  return IconButton(\n                                    icon:\n                                        Icon(Icons.star_rounded, size: 40), // Adjust size here\n                                    color: (index < _currentRating)\n                                        ? FlutterFlowTheme.of(context)\n                                            .tertiary // Yellow for selected\n                                        : FlutterFlowTheme.of(context)\n                                            .alternate, // Grey for unselected\n                                    onPressed: () => _updateRating(index + 1),\n                                  );\n                                }),\n                              ),\n                              if (_ratingText.isNotEmpty)\n                                Padding(\n                                  padding: const EdgeInsets.only(top: 8.0),\n                                  child: Center(\n                                    child: Text(\n                                      _ratingText,\n                                      style: FlutterFlowTheme.of(context)\n                                          .bodyLarge\n                                          .override(\n                                            fontFamily: \'Readex Pro\',\n                                            color: FlutterFlowTheme.of(context)\n                                                .primaryText,\n                                            fontWeight: FontWeight.bold,\n                                          ),\n                                    ),\n                                  ),\n                                ),\n                            ],\n                          ),\n                        ),\n                      ),\n                      const SizedBox(height: 24),\n\n                      // Feedback Tags Section\n                      Text(\n                        \'What did you like?\',\n                        style: FlutterFlowTheme.of(context).titleLarge.override(\n                              fontFamily: \'Outfit\',\n                              color: FlutterFlowTheme.of(context).primaryText,\n                            ),\n                      ),\n                      const SizedBox(height: 16),\n                      Wrap(\n                        spacing: 8.0,\n                        runSpacing: 8.0,\n                        children: _feedbackTags.map((tag) {\n                          final isSelected = _selectedFeedbackTags.contains(tag);\n                          return ChoiceChip(\n                            label: Text(tag),\n                            selected: isSelected,\n                            onSelected: (selected) {\n                              _toggleFeedbackTag(tag);\n                            },\n                            selectedColor:\n                                FlutterFlowTheme.of(context).primary.withOpacity(0.2), // Light blue/green\n                            backgroundColor:\n                                FlutterFlowTheme.of(context).secondaryBackground,\n                            labelStyle: FlutterFlowTheme.of(context)\n                                .bodyMedium\n                                .override(\n                                  fontFamily: \'Readex Pro\',\n                                  color: isSelected\n                                      ? FlutterFlowTheme.of(context).primary\n                                      : FlutterFlowTheme.of(context)\n                                          .primaryText,\n                                ),\n                            side: BorderSide(\n                              color: isSelected\n                                  ? FlutterFlowTheme.of(context).primary\n                                  : FlutterFlowTheme.of(context).alternate,\n                              width: 1,\n                            ),\n                            shape: RoundedRectangleBorder(\n                              borderRadius: BorderRadius.circular(20),\n                            ),\n                          );\n                        }).toList(),\n                      ),\n                    ],\n                  ),\n                ),\n              ),\n            ),\n            Padding(\n              padding: const EdgeInsets.all(16.0),\n              child: SizedBox(\n                width: double.infinity,\n                child: ElevatedButton(\n                  onPressed: () {\n                    // Handle \"Done\" button press\n                    print(\'Done button pressed\');\n                    print(\'Rating: \$_currentRating\');\n                    print(\'Selected Feedback: \$_selectedFeedbackTags\');\n                    // Navigate back to home or next ride screen\n                    Navigator.popUntil(context, (route) => route.isFirst);\n                  },\n                  style: ElevatedButton.styleFrom(\n                    backgroundColor: FlutterFlowTheme.of(context).tertiary, // Yellow button\n                    minimumSize: const Size(double.infinity, 50),\n                    padding: const EdgeInsets.symmetric(horizontal: 24),\n                    shape: RoundedRectangleBorder(\n                      borderRadius: BorderRadius.circular(8),\n                    ),\n                    elevation: 3,\n                  ),\n                  child: Text(\n                    \'Done\',\n                    style: FlutterFlowTheme.of(context).titleSmall.override(\n                          fontFamily: \'Readex Pro\',\n                          color: Colors.black,\n                          fontSize: 18,\n                        ),\n                  ),\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}\n